import{H as F,r as I,w as A,o as q,a as g,c as k,b as i,F as x,e as O,t as v,f as H,j as M,_ as E,u as U,g as V,A as z,i as Z,k as $,B,m as C,E as G,I as J,l as L,p as Y,d as W}from"./index-3813d8be.js";import{M as K,H as N,m as Q,a as X,b as ee,c as te,d as oe,e as se,f as ne,g as ae,h as ie,i as le}from"./github-ae0b28d1.js";/* empty css                                                                  */import{d as re,g as ce}from"./server-bcbc5ffc.js";import{Z as ue}from"./ZyPageHeader-8204fe38.js";/* empty css                                                               */import{a as de,c as pe,d as he}from"./api.blog_articles-d35cba77.js";import{T as _e}from"./util.time-c27b4c72.js";function me(p){return encodeURIComponent(String(p).trim().toLowerCase().replace(/\s+/g,"-"))}function D(p){return String(p).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function fe(p,_){var y;_=Object.assign({},{placeholder:"(\\$\\{toc\\}|\\[\\[?_?toc_?\\]?\\]|\\$\\<toc(\\{[^}]*\\})\\>)",slugify:me,uniqueSlugStartIndex:1,containerClass:"table-of-contents",containerId:void 0,listClass:void 0,itemClass:void 0,linkClass:void 0,level:1,listType:"ol",format:void 0,callback:void 0},_);var n=new RegExp("^"+_.placeholder+"$","i");p.renderer.rules.tocOpen=function(l,u){var s=Object.assign({},_);return l&&u>=0&&(s=Object.assign(s,l[u].inlineOptions)),"<nav"+(s.containerId?' id="'+D(s.containerId)+'"':"")+' class="'+D(s.containerClass)+'">'},p.renderer.rules.tocClose=function(){return"</nav>"},p.renderer.rules.tocBody=function(l,u){var s=Object.assign({},_);l&&u>=0&&(s=Object.assign(s,l[u].inlineOptions));var d,r={},f=Array.isArray(s.level)?(d=s.level,function(t){return d.includes(t)}):function(t){return function(e){return e>=t}}(s.level);return function t(e){var o=s.listClass?' class="'+D(s.listClass)+'"':"",m=s.itemClass?' class="'+D(s.itemClass)+'"':"",a=s.linkClass?' class="'+D(s.linkClass)+'"':"";if(e.c.length===0)return"";var c="";return(e.l===0||f(e.l))&&(c+="<"+(D(s.listType)+o)+">"),e.c.forEach(function(h){f(h.l)?c+="<li"+m+"><a"+a+' href="#'+function(w){for(var b=w,T=s.uniqueSlugStartIndex;Object.prototype.hasOwnProperty.call(r,b);)b=w+"-"+T++;return r[b]=!0,b}(_.slugify(h.n))+'">'+(typeof s.format=="function"?s.format(h.n,D):D(h.n))+"</a>"+t(h)+"</li>":c+=t(h)}),(e.l===0||f(e.l))&&(c+="</"+D(s.listType)+">"),c}(y)},p.core.ruler.push("generateTocAst",function(l){y=function(u){for(var s={l:0,n:"",c:[]},d=[s],r=0,f=u.length;r<f;r++){var t=u[r];if(t.type==="heading_open"){var e=u[r+1].children.filter(function(m){return m.type==="text"||m.type==="code_inline"}).reduce(function(m,a){return m+a.content},""),o={l:parseInt(t.tag.substr(1),10),n:e,c:[]};if(o.l>d[0].l)d[0].c.push(o),d.unshift(o);else if(o.l===d[0].l)d[1].c.push(o),d[0]=o;else{for(;o.l<=d[0].l;)d.shift();d[0].c.push(o),d.unshift(o)}}}return s}(l.tokens),typeof _.callback=="function"&&_.callback(p.renderer.rules.tocOpen()+p.renderer.rules.tocBody()+p.renderer.rules.tocClose(),y)}),p.block.ruler.before("heading","toc",function(l,u,s,d){var r,f=l.src.slice(l.bMarks[u]+l.tShift[u],l.eMarks[u]).split(" ")[0];if(!n.test(f))return!1;if(d)return!0;var t=n.exec(f),e={};if(t!==null&&t.length===3)try{e=JSON.parse(t[2])}catch{}return l.line=u+1,(r=l.push("tocOpen","nav",1)).markup="",r.map=[u,l.line],r.inlineOptions=e,(r=l.push("tocBody","",0)).markup="",r.map=[u,l.line],r.inlineOptions=e,r.children=[],(r=l.push("tocClose","nav",-1)).markup="",!0},{alt:["paragraph","reference","blockquote"]})}const ge={class:"renderToc"},ke=["onClick"],ve={class:"subToc"},ye=["onClick"],we=["onClick"],De=["innerHTML"],be={__name:"ZyMarkdownRenderer",props:{markdownContent:{type:String,required:!0,default:()=>""},showToc:{type:Boolean,default:()=>!1}},setup(p){const _=p,y=F(()=>_.showToc),n=I(!0),l=()=>{n.value=!n.value},u=I(""),s=I([]),d=I([]),r=()=>{const t=new K({html:!0,breaks:!0,linkify:!0,quotes:!0,highlight:(a,c)=>{if(c&&N.getLanguage(c))try{return`<pre><code class="hljs language-${c}">${N.highlight(a,{language:c,ignoreIllegals:!0}).value}</code></pre>`}catch{}return`<pre><code class="hljs">${encodeURIComponent(a)}</code></pre>`}});t.use(Q),t.use(X),t.use(ee),t.use(te),t.use(oe),t.use(se),t.use(ne),t.use(ae),t.use(ie,{startOnLoad:!0,securityLevel:!0,theme:"base"}),["tip","warning","danger","details"].forEach(a=>{t.use(le,a,{render:(c,h)=>c[h].nesting===1?a!=="details"?`<div class="${a}-container"><p class="cu-title">${a==="tip"?"ÊèêÁ§∫":a==="warning"?"Ê≥®ÊÑè":"Ë≠¶Âëä"}</p>`:'<details class="details-container">':a!=="details"?"</div>":"</details>"})}),t.renderer.rules.details_summary=function(a,c){const h=a[c];return'<summary class="details-summary">'+t.utils.escapeHtml(h.content)+"</summary>"},t.use(fe,{level:[1,2],slugify:a=>"toc_"+a.trim().toLowerCase().replace(/\s+/g,"-")}),t.renderer.rules.heading_open=(a,c,h,w,b)=>{const T=a[c],P=Number(T.tag.substr(1)),j=a[c+1].content,R=j.trim().toLowerCase().replace(/\s+/g,"-");return T.attrSet("id","toc_"+R),s.value.push({level:P,anchor:"toc_"+R,titleText:j}),d.value=o(s.value),`<h${P} id="toc_${R}">`};function o(a){const c={children:[]},h=[c];for(const w of a){const b={anchor:w.anchor,titleText:w.titleText,children:[]};if(w.level===1)for(;h.length>1;)h.pop();h[h.length-1].children.push(b),w.level===1&&h.push(b)}return c.children}let m=t.render(_.markdownContent);u.value=m.replaceAll("<input","<input disabled ")},f=t=>{const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})};return A(()=>_.markdownContent,()=>{r()}),q(()=>{r()}),(t,e)=>(g(),k("section",{class:H(["renderBox",{showTocA:M(y)}])},[i("ul",ge,[i("li",{class:"title",onClick:l}," ÁõÆÂΩï "),(g(!0),k(x,null,O(d.value,o=>(g(),k("li",{key:o.anchor},[o.children.length?(g(),k(x,{key:0},[i("p",{class:"has-children",onClick:m=>f(o.anchor)},"- "+v(o.titleText),9,ke),i("ul",ve,[(g(!0),k(x,null,O(o.children,m=>(g(),k("li",{key:m.anchor,onClick:a=>f(m.anchor)}," - "+v(m.titleText),9,ye))),128))])],64)):(g(),k("p",{key:1,class:"toc-item",onClick:m=>f(o.anchor)}," - "+v(o.titleText),9,we))]))),128))]),i("section",{innerHTML:u.value,id:"custom-markdown"},null,8,De)],2))}};const S=p=>(Y("data-v-779c0c2e"),p=p(),W(),p),Ce={class:"contents-wrap"},Te={class:"content-header"},Ie={class:"header-text"},xe={class:"header-tip"},Se=S(()=>i("div",{class:"tip-item"},[i("i",{class:"iconfont icon-zuozhe tip-icon"}),C("Leo Yu")],-1)),Re={class:"tip-item"},$e=S(()=>i("i",{class:"iconfont icon-shijian tip-icon"},null,-1)),Le=S(()=>i("hr",{style:{"margin-bottom":"2rem"}},null,-1)),Oe={class:"content-footer"},Me={class:"footer-r"},Pe={class:"view"},je={key:0,class:"reship"},Be=["href"],Ne={key:1},Ae=S(()=>i("h2",{class:"section-title"},[C(" üéØ Related Posts "),i("span",{"data-number":"01"})],-1)),qe={class:"related"},Fe=["onClick"],He={__name:"PostDetail",setup(p){const _=U(),y=I(null),n=V({query:{_id:_.currentRoute.value.params.id},openToc:!1,fontFamily:!1,postDetailData:{},postRelateData:[]});A(()=>_.currentRoute.value.params,e=>{e.id&&l(e.id)});const l=e=>{n.query._id=e,r()},u=(e,o)=>{_.push({name:e,params:{id:o}}),l(o)},s=()=>{n.fontFamily=!n.fontFamily,n.fontFamily?y.value.style.fontFamily='"lustria", SimSun, serif':y.value.style.fontFamily="S√∂hne,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji"},d=e=>{he({_id:e}).then(o=>{n.postRelateData=o.data||[]})},r=()=>{de(n.query).then(e=>{n.postDetailData=e.data||{}})},f=()=>{d({_id:n.query._id})},t=()=>{pe({_id:n.query._id}).then(e=>{var o;e.status&&((o=e.data)!=null&&o.token&&re.set("tempToken",e.data.token),n.postDetailData.likeNum+=1)})};return r(),f(),q(()=>{z()}),(e,o)=>{const m=Z("router-link");return g(),k("section",{class:"zy-blog-detail",ref_key:"detailLayerRef",ref:y},[$(ue,{title:"Post Details",subTitle:"Interesting people record interesting things",disBgAnimate:"",img:"https://images.unsplash.com/photo-1495305730668-3d13ae2a3250?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",current:"PostDetail"},{action:B(()=>[i("span",{class:"page-action",onClick:o[0]||(o[0]=a=>M(ce)("/blog"))},"Blog List / ")]),_:1}),i("main",Ce,[i("div",Te,[i("h2",Ie,v(n.postDetailData.title),1),i("div",xe,[Se,i("div",Re,[$e,C(v(M(_e).formatRelativeTime(n.postDetailData.createdAt)),1)]),i("div",{class:"tip-item",onClick:s},"Blog List")])]),Le,$(be,{markdownContent:n.postDetailData.content,showToc:n.openToc},null,8,["markdownContent","showToc"]),i("div",Oe,[G(i("div",{class:"footer-l"}," # "+v(n.postDetailData.category),513),[[J,n.postDetailData.category]]),i("div",Me,[i("div",Pe," Views ("+v(n.postDetailData.viewNum||0)+") ",1),i("div",{class:"like",onClick:t}," Likes ("+v(n.postDetailData.likeNum||0)+") ",1)])]),n.postDetailData.isReship?(g(),k("div",je,[i("p",null,[C("Repost:- "),i("a",{href:n.postDetailData.isReshipUrl,target:"_blank"}," „Ää"+v(n.postDetailData.isReshipName)+"„Äã",9,Be)]),i("p",null,[C("Note: If this infringes your copyright, please "),$(m,{to:"/"},{default:B(()=>[C("contact me")]),_:1}),C(" with the original article link. I will delete this post. Sorry for the inconvenience! ")])])):L("",!0),n.postRelateData.length?(g(),k("section",Ne,[Ae,i("div",qe,[i("ul",null,[(g(!0),k(x,null,O(n.postRelateData,(a,c)=>(g(),k("li",{key:a._id,onClick:h=>u("PostDetail",a._id)},v(a.title),9,Fe))),128))])])])):L("",!0),L("",!0)])],512)}}},Ke=E(He,[["__scopeId","data-v-779c0c2e"]]);export{Ke as default};
